<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>Index. PEcAn.data.atmosphere 1.4.5</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="Carl Davidson, Mike Dietze, Rob Kooper, Deepak Jaiswal, David LeBauer">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">PEcAn.data.atmosphere 1.4.5</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <div class="row">
  <div class="span8">
    <h1>PEcAn functions for processing meteorological data</h1>

<p>Converts meteorological products to PEcAn-CF formated netCDF files.</p>

<h2>Supported Formats</h2>

<p>Current list of input meteorological formats supported, functions are named <code>download.&lt;source&gt;</code> and <code>met2CF.&lt;source&gt;</code>.</p>

<ul>
<li>NCEP</li>
<li>NARR</li>
<li>Ameriflux</li>
<li>FACE</li>
<li>ALMA</li>
<li>arbitrary csv files </li>
</ul>

<h2>Installation</h2>

<pre><code class="r">library(devtools)
install_github(&quot;pecanproject/pecan/modules/data.atmosphere&quot;)
</code></pre>

<p>The PEcAn.data.atmosphere package is &#39;standalone&#39;.</p>

<h2>Documentation</h2>

<ul>
<li><a href="https://pecanproject.github.io/pecan//modules/data.atmosphere/inst/web/index.html">Package Documentation</a></li>
<li>Vignettes</li>
</ul>

<h2>PEcAn variable names</h2>

<p>See <a href="https://github.com/PecanProject/pecan/wiki/Adding-an-Input-Converter#met-data">https://github.com/PecanProject/pecan/wiki/Adding-an-Input-Converter#met-data</a></p>

<p>General Note: dates in the database should be datatime (preferably with timezone), and datetime passed around in PEcAn should be of type POSIXlt.</p>

<h2>Met Data</h2>

<p>The standard met data inputs should be of the form:</p>

<p>Converters from a raw to standard format go in <code>/modules/data.atmosphere/R</code>; converters from standard to model-specific go in <code>models/&lt;mymodel&gt;/R</code>.</p>

<ul>
<li>For a number of common gridded products (NARR, CRUNCEP, ISIMIP), there are bash scripts for converting and rechunking in this repository: <a href="https://github.com/ebimodeling/model-drivers">https://github.com/ebimodeling/model-drivers</a>; these are not generalized, but may be merged into PEcAn at some point.</li>
</ul>

<p>Examples:</p>

<ul>
<li>NARR:</li>
<li>CRUNCEP:</li>
<li>ISIMIP: </li>
</ul>

<p>Names should be <code>met2CF.&lt;sourcename&gt;</code> and <code>met2model.&lt;modelname&gt;</code>.</p>

<h2>Dimensions:</h2>

<table><thead>
<tr>
<th align="left">CF standard-name</th>
<th align="left">units</th>
</tr>
</thead><tbody>
<tr>
<td align="left">time</td>
<td align="left">days since 1700-01-01 00:00:00 UTC</td>
</tr>
<tr>
<td align="left">longitude</td>
<td align="left">degrees_east</td>
</tr>
<tr>
<td align="left">latitude</td>
<td align="left">degrees_north</td>
</tr>
</tbody></table>

<h2>The variable names should be <code>standard_name</code></h2>

<table><thead>
<tr>
<th align="left">CF standard-name</th>
<th align="left">units</th>
<th align="left">bety</th>
<th align="left">isimip</th>
<th align="left">cruncep</th>
<th align="left">narr</th>
<th align="left">ameriflux</th>
</tr>
</thead><tbody>
<tr>
<td align="left"><strong>air_temperature</strong></td>
<td align="left">K</td>
<td align="left">airT</td>
<td align="left">tasAdjust</td>
<td align="left">tair</td>
<td align="left">air</td>
<td align="left">TA &copy;</td>
</tr>
<tr>
<td align="left">air_temperature_max</td>
<td align="left">K</td>
<td align="left"></td>
<td align="left">tasmaxAdjust</td>
<td align="left">NA</td>
<td align="left">tmax</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">air_temperature_min</td>
<td align="left">K</td>
<td align="left"></td>
<td align="left">tasminAdjust</td>
<td align="left">NA</td>
<td align="left">tmin</td>
<td align="left"></td>
</tr>
<tr>
<td align="left"><strong>air_pressure</strong></td>
<td align="left">Pa</td>
<td align="left">air_pressure</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">PRESS (KPa)</td>
</tr>
<tr>
<td align="left">mole_fraction_of_carbon_dioxide_in_air</td>
<td align="left">mol/mol</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CO2</td>
</tr>
<tr>
<td align="left">moisture_content_of_soil_layer</td>
<td align="left">kg m-2</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">soil_temperature</td>
<td align="left">K</td>
<td align="left">soilT</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">TS1 <em>(NOT DONE)</em></td>
</tr>
<tr>
<td align="left">relative_humidity</td>
<td align="left">%</td>
<td align="left">relative_humidity</td>
<td align="left">rhurs</td>
<td align="left">NA</td>
<td align="left">rhum</td>
<td align="left">RH</td>
</tr>
<tr>
<td align="left"><strong>specific_humidity</strong></td>
<td align="left">1</td>
<td align="left">specific_humidity</td>
<td align="left">NA</td>
<td align="left">qair</td>
<td align="left">shum</td>
<td align="left">CALC(RH)</td>
</tr>
<tr>
<td align="left">water_vapor_saturation_deficit</td>
<td align="left">Pa</td>
<td align="left">VPD</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">VPD <em>(NOT DONE)</em></td>
</tr>
<tr>
<td align="left"><strong>surface_downwelling_longwave_flux_in_air</strong></td>
<td align="left">W m-2</td>
<td align="left">same</td>
<td align="left">rldsAdjust</td>
<td align="left">lwdown</td>
<td align="left">dlwrf</td>
<td align="left">Rgl</td>
</tr>
<tr>
<td align="left"><strong>surface_downwelling_shortwave_flux_in_air</strong></td>
<td align="left">W m-2</td>
<td align="left">solar_radiation</td>
<td align="left">rsdsAdjust</td>
<td align="left">swdown</td>
<td align="left">dswrf</td>
<td align="left">Rg</td>
</tr>
<tr>
<td align="left">surface_downwelling_photosynthetic_photon_flux_in_air</td>
<td align="left">mol m-2 s-1</td>
<td align="left">PAR</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">PAR <em>(NOT DONE)</em></td>
</tr>
<tr>
<td align="left"><strong>precipitation_flux</strong></td>
<td align="left">kg m-2 s-1</td>
<td align="left">cccc</td>
<td align="left">prAdjust</td>
<td align="left">rain</td>
<td align="left">acpc</td>
<td align="left">PREC (mm/s)</td>
</tr>
<tr>
<td align="left"></td>
<td align="left">degrees</td>
<td align="left">wind_direction</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">WD</td>
</tr>
<tr>
<td align="left">wind_speed</td>
<td align="left">m/s</td>
<td align="left">Wspd</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">WS</td>
</tr>
<tr>
<td align="left"><strong>eastward_wind</strong></td>
<td align="left">m/s</td>
<td align="left">eastward_wind</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CALC(WS+WD)</td>
</tr>
<tr>
<td align="left"><strong>northward_wind</strong></td>
<td align="left">m/s</td>
<td align="left">northward_wind</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">CALC(WS+WD)</td>
</tr>
</tbody></table>

<ul>
<li>preferred variables indicated in bold</li>
<li>wind_direction has no CF equivalent and should not be converted, instead the met2CF functions should convert wind_direction and wind_speed to eastward_wind and northward_wind</li>
<li>variable names are from <a href="http://nacp.ornl.gov/MsTMIP_variables.shtml">MsTMIP</a>, but lowercase to be consistent with the MsTMIP drivers.</li>
<li>standard_name is CF-convention standard names</li>
<li>units can be converted by udunits, so these can vary (e.g. the time denominator may change with time frequency of inputs)</li>
<li>soil moisture for the full column, rather than a layer, is soil_moisture_content</li>
</ul>

<p>For the standardized files, we are using CF standard names as variable names.</p>

<p>For example, in the <a href="https://www.betydb.org/inputs/280">MsTMIP-CRUNCEP</a> data, the variable <code>rain</code> should be <code>precipitation_rate</code>.
We want to standardize the units as well as part of the <code>met2CF.&lt;product&gt;</code> step. I believe we want to use the CF &ldquo;canonical&rdquo; units but retain the MsTMIP units any time CF is ambiguous about the units.</p>

<p>The key is to process each type of met data (site, reanalysis, forecast, climate scenario, etc) to the exact same standard. This way every operation after that (extract, gap fill, downscale, convert to a model, etc) will always have the exact same inputs. This will make everything else much simpler to code and allow us to avoid a lot of unnecessary data checking, tests, etc being repeated in every downstream function.</p>


    <h2>Help topics</h2>

    <h3></h3>
    
    
    <ul class="index">
        
      <li>
        <code><a href="AirDens.html">AirDens</a></code><br />Air Density</li>
            
      <li>
        <code><a href="browndog.met.html">browndog.met</a></code><br />get met data from browndog</li>
            
      <li>
        <code><a href="cfmet.downscale.daily.html">cfmet.downscale.daily</a></code><br />daily to subdaily downscaling</li>
            
      <li>
        <code><a href="cfmet.downscale.subdaily.html">cfmet.downscale.subdaily</a></code><br />subdaily downscaling</li>
            
      <li>
        <code><a href="cfmet.downscale.time.html">cfmet.downscale.time</a></code><br />Downscale CF met data</li>
            
      <li>
        <code><a href="closest_xy.html">closest_xy</a></code><br />closest_xy</li>
            
      <li>
        <code><a href="db.site.lat.lon.html">db.site.lat.lon</a></code><br />db.site.lat.lon</li>
            
      <li>
        <code><a href="download.Ameriflux.html">download.Ameriflux</a></code><br />download.Ameriflux</li>
            
      <li>
        <code><a href="download.CRUNCEP.html">download.CRUNCEP</a></code><br />download.CRUNCEP</li>
            
      <li>
        <code><a href="download.FACE.html">download.FACE</a></code><br />download.FACE</li>
            
      <li>
        <code><a href="download.NARR.html">download.NARR</a></code><br />download.NARR</li>
            
      <li>
        <code><a href="download.PalEON.html">download.PalEON</a></code><br />download.PalEON</li>
            
      <li>
        <code><a href="exner.html">exner</a></code><br />Exner function</li>
            
      <li>
        <code><a href="extract.nc.html">extract.nc</a></code><br />extract.nc</li>
            
      <li>
        <code><a href="get.es.html">get.es</a></code><br />get es</li>
            
      <li>
        <code><a href="get.ncvector.html">get.ncvector</a></code><br />Get time series vector from netCDF file</li>
            
      <li>
        <code><a href="get.rh.html">get.rh</a></code><br />get RH</li>
            
      <li>
        <code><a href="get.vpd.html">get.vpd</a></code><br />VPD</li>
            
      <li>
        <code><a href="lightME.html">lightME</a></code><br />Simulates the light macro environment</li>
            
      <li>
        <code><a href="load.cfmet.html">load.cfmet</a></code><br />load CF met</li>
            
      <li>
        <code><a href="met.process.html">met.process</a></code><br />met.process</li>
            
      <li>
        <code><a href="met.process.stage.html">met.process.stage</a></code><br />met.process.stage</li>
            
      <li>
        <code><a href="met2CF.ALMA.html">met2CF.ALMA</a></code><br />met2CF.ALMA</li>
            
      <li>
        <code><a href="met2CF.Ameriflux.html">met2CF.Ameriflux</a></code><br />met2CF.Ameriflux</li>
            
      <li>
        <code><a href="met2CF.FACE.html">met2CF.FACE</a></code><br />met2CF.FACE</li>
            
      <li>
        <code><a href="met2CF.NARR.html">met2CF.NARR</a></code><br />met2CF.NARR</li>
            
      <li>
        <code><a href="met2CF.PalEON.html">met2CF.PalEON</a></code><br />met2CF.PalEON</li>
            
      <li>
        <code><a href="met2CF.csv.html">met2CF.csv</a></code><br />met2CF.csv</li>
            
      <li>
        <code><a href="metgapfill.html">metgapfill</a></code><br />Take an Ameriflux NetCDF file
</li>
            
      <li>
        <code><a href="par2ppfd.html">par2ppfd</a></code><br />par2ppfd</li>
            
      <li>
        <code><a href="permute.nc.html">permute.nc</a></code><br />permute.nc</li>
            
      <li>
        <code><a href="qair2rh.html">qair2rh</a></code><br />qair2rh</li>
            
      <li>
        <code><a href="read.register.html">read.register</a></code><br />read.register</li>
            
      <li>
        <code><a href="rh2qair.html">rh2qair</a></code>(rh2rv)<br />RH to SH</li>
            
      <li>
        <code><a href="site.lst.html">site.lst</a></code><br />site.lst</li>
            
      <li>
        <code><a href="site_from_tag.html">site_from_tag</a></code><br />site_from_tag</li>
            
      <li>
        <code><a href="solarMJ2ppfd.html">solarMJ2ppfd</a></code><br />MJ to PPFD</li>
            
      <li>
        <code><a href="sw2par.html">sw2par</a></code><br />SW to PAR</li>
            
      <li>
        <code><a href="sw2ppfd.html">sw2ppfd</a></code><br />SW to PPFD</li>
            
      <li>
        <code><a href="wide2long.html">wide2long</a></code><br />Wide to Long</li>
    
    </ul>
  </div>
  
  <div class="span3 offset1">
        
    <h2>Dependencies</h2>
    <ul>
      <li><strong>Depends</strong>: PEcAn.utils, ncdf4, udunits2, ggplot2, data.table, lubridate, REddyProc</li>
      
      
      
    </ul>
    <h2>Authors</h2>
    <ul>
    </ul>

  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="https://getbootstrap.com/2.0.4/">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>